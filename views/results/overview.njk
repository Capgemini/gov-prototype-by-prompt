<form id="promptForm" class="govuk-form-group govuk-!-margin-0" novalidate>
    <input type="hidden" id="workspaceId" name="workspaceId" value="{{ workspace.id }}">
    <input type="hidden" id="promptType" name="promptType" value="{{ overviewVM.promptType }}">

    <input
    type="hidden"
    id="jsonPrompt"
    name="prompt"
    value="{{ json }}"
    {% if not overviewVM.showJsonEditor %}disabled{% endif %}
  >

    <h1 class="govuk-label-wrapper">
        <label class="govuk-label govuk-label--m" for="textPrompt">
      Update the prototype
    </label>
    </h1>

    <div id="editor" class="{% if not overviewVM.showJsonEditor %}display-none{% endif %}">
        <div id="aceEditor" style="height: 400px; resize: vertical; overflow: auto"></div>
        <p>
            <a class="govuk-link" href="/help/supported-prototype-options" target="_blank">
        View available options
      </a>
        </p>
    </div>

    {% if overviewVM.showJsonEditor %}
        {% set textareaClasses = "display-none" %}
    {% else %}
        {% set textareaClasses = "" %}
    {% endif %}

    {{ govukTextarea({
    name: "prompt",
    id: "textPrompt",
    rows: 6,
    classes: textareaClasses,
    disabled: overviewVM.showJsonEditor
  }) }}

    {{ govukSelect({
    classes: "govuk-!-width-full",
    id: "designSystem",
    name: "designSystem",
    label: {
      text: "Choose a design system",
      classes: "govuk-label--m"
    },
    items: [
      { value: "GOV.UK", text: "GOV.UK", selected: designSystem == "GOV.UK" },
      { value: "HMRC", text: "HMRC", selected: designSystem == "HMRC" }
    ]
  }) }}

    <div class="govuk-button-group">
        {{ govukButton({
      id: "startPrototypeButton",
      text: "Update prototype",
      type: "submit",
      preventDoubleClick: true
    }) }}
        {{ govukButton({
      id: "switchPromptTypeButton",
      type: "button",
      text: overviewVM.switchPromptButtonText,
      classes: "govuk-button--secondary"
    }) }}
        <input type="hidden" name="prototypeId" value="{{ prototypeId }}">
    </div>
</form>

{% if enableSuggestions %}
    <h2 class="govuk-heading-m">
    Use a suggested prompt (<a id="refreshSuggestionsLink" href="javascript:;">refresh</a>)
  </h2>

    <div class="govuk-button-group">
        {% for s in overviewVM.suggestions %}
            <button type="button"
              class="govuk-button govuk-button--secondary govuk-!-margin-right-2 govuk-!-margin-bottom-2 suggestion-button">
                {{ s.text }}
            </button>
        {% endfor %}
    </div>

    <p class="govuk-body no-suggestions {% if not overviewVM.noSuggestions %}display-none{% endif %}">
    No suggestions generated.
  </p>
{% endif %}

{% if overviewVM.explanation %}
    {{ govukDetails({
    summaryText: "View AI explanation",
    text: overviewVM.explanation
  }) }}
{% endif %}

{{ govukWarningText({
  text: "Always check the prototypes generated by this tool, as they may contain inaccurate information.",
  iconFallbackText: "Warning"
}) }}