services:
  app:
    build: .
    ports:
      - "3001:3001"
    env_file: ".env"
    depends_on:
      - mongodb
    models:
      llm:
        endpoint_var: OPENAI_BASE_URL
        model_var: OPENAI_MODEL_ID

  mongodb:
    image: mongo:8.0
    ports:
      - "27017:27017"
    env_file: ".env"
    restart: unless-stopped
    volumes:
      - mongodb-data:/data/db

models:
  llm:
    model: ai/gpt-oss

volumes:
  mongodb-data:
